<div class="bg-gray-50 flex-row space-y-4">


<div class="p-6 max-w-full mx-auto bg-white shadow-md rounded-md ">
    @if (cardDetails) 
    {
    <div class="lg:flex lg:items-center lg:justify-between">
        <div class="mt-5 flex lg:ml-4 lg:mt-0">
            <span class="hidden sm:block">
                <button (click)="deleteCard(cardDetails.id)" type="button" class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                    <svg class="h-8 w-8 text-red-500"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round">  <polyline points="3 6 5 6 21 6" />  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />  <line x1="10" y1="11" x2="10" y2="17" />  <line x1="14" y1="11" x2="14" y2="17" /></svg>
                </button>
            </span>
            
            <span class="ml-3 hidden sm:block">
                <button (click)="openDialog()" 
                    type="button" class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                    <svg class="h-8 w-8 text-blue-500"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <rect x="4" y="4" width="6" height="6" rx="1" />  <line x1="7" y1="17" x2="7" y2="17.01" />  <rect x="14" y="4" width="6" height="6" rx="1" />  <line x1="7" y1="7" x2="7" y2="7.01" />  <rect x="4" y="14" width="6" height="6" rx="1" />  <line x1="17" y1="7" x2="17" y2="7.01" />  <line x1="14" y1="14" x2="17" y2="14" />  <line x1="20" y1="14" x2="20" y2="14.01" />  <line x1="14" y1="14" x2="14" y2="17" />  <line x1="14" y1="20" x2="17" y2="20" />  <line x1="17" y1="17" x2="20" y2="17" />  <line x1="20" y1="17" x2="20" y2="20" /></svg>
                    Create QR Code
                </button>
            </span>
            
            <span class="sm:ml-3">
            <div type="button" class="inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                <svg class="h-8 w-8 text-white-500"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round">  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />  <polyline points="15 3 21 3 21 9" />  <line x1="10" y1="14" x2="21" y2="3" /></svg>
                <a routerLink="/profile/{{userId}}" target="_blank" >Publish</a>
            </div>
            </span>
            
            <!-- Dropdown -->
            <div class="relative ml-3 sm:hidden">
            <button type="button" 
            class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"
            id="mobile-menu-button" aria-expanded="false" aria-haspopup="true"
            >
                More
                <svg class="-mr-1 ml-1.5 size-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                </svg>
            </button>
        
            
            <div class="absolute right-0 z-10 -mr-1 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black/5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="mobile-menu-button" tabindex="-1">
                <!-- Active: "bg-gray-100 outline-none", Not Active: "" -->
                <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1" id="mobile-menu-item-0">Edit</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1" id="mobile-menu-item-1">View</a>
            </div>
            </div>
        </div>
    </div>
    }
</div>

<div class="p-6 max-w-full mx-auto bg-white shadow-md rounded-md">
    
    <h1 class="text-2xl font-bold mb-2">Personal Information</h1>
    <p class="text-gray-600 mb-6">Use a permanent address where you can receive mail.</p>
    <div class="flex flex-col md:flex-row gap-6">
        <!-- Left Side: Form -->
        <div class="flex-1">
            <form [formGroup]="cardDetailsForm" (ngSubmit)="onSubmit()" >
                <div class="text-center mb-6">
                    <h1 class="text-3xl font-semibold text-primary">Card Detail</h1>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <app-text-input label="userId" formControlName="userId" class="hidden"/>
                    <app-text-input label="Name" formControlName="name"/>
                    <app-text-input label="Title" formControlName="title"/>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <app-text-input label="Phone" formControlName="phone"/>
                    <app-text-input label="Email" formControlName="email"/>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <app-text-input label="Organization" formControlName="organization"/>
                    <app-text-input label="Address" formControlName="address"/>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <app-text-input label="City" formControlName="city"/>
                    <app-text-input label="State" formControlName="state"/>
                    <app-text-input label="Zip Code" formControlName="zipCode"/>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <app-text-input label="Instagram Link" formControlName="weblink1"/>
                    <app-text-input label="Facebook Link" formControlName="weblink2"/>
                    <app-text-input label="Linkedin Link" formControlName="weblink3"/>
                    <app-text-input label="Whatsapp Link" formControlName="weblink4"/>
                </div> 
                @if(validationErrors){
                    <div class="mb-3 p-4 bg-red-100 text-red-600" *ngIf="validationErrors.length > 0">
                        <ul class="list-disc px-3">
                            @for(error of validationErrors; track $index){
                                <li>{{error}}</li>
                            }
                        </ul>
                    </div>
                }
            
            
                <button 
                    [disabled]="cardDetailsForm.invalid || !isAnyTouched()"
                    mat-flat-button type="submit" 
                    class="w-full py-2">Save</button>
            </form>    
            
            
        </div>
        <!-- Right Side: Picture -->
        <div class="flex-shrink-0 w-full md:w-64">
            <label class="block text-sm font-medium text-gray-700 mb-2">Profile Photo</label>
            <div class="flex justify-center items-center w-full h-64 border-2 border-dashed border-gray-300 rounded-md bg-gray-50">
                <div class="text-center">
                    @if (photoUrl) 
                    {
                        <img src={{photoUrl}} alt=""  class="h-32 w-32">
                    }
                    @else {
                        <svg
                        class="mx-auto h-12 w-12 text-gray-400"
                        stroke="currentColor"
                        fill="none"
                        viewBox="0 0 48 48"
                        aria-hidden="true">
                        <path
                        d="M14.5 14.5l19 19m-19 0l19-19m8.25-5.25h-5.25m0 0v5.25M39 14.25V35c0 1.242-.504 2.437-1.406 3.313C36.437 39 35.242 39.5 34 39.5H14.25c-1.242 0-2.437-.504-3.313-1.406-.906-.906-1.437-2.062-1.437-3.344v-20.75c0-1.242.504-2.437 1.406-3.313.906-.906 2.062-1.437 3.344-1.437H25"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        />
                    </svg>
                    }
                    
                    <div class="mt-2 text-sm text-gray-600">
                        <label
                        for="file-upload"
                        class="cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500"
                        >
                        <span>Upload a file</span>
                            <input 
                                id="file-upload" 
                                name="file-upload" 
                                type="file" class="sr-only"
                                (change)="onFileSelected($event)" />
                        </label>
                        <p>or drag and drop</p>
                    </div>
                    <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                    <button
                    (click)="uploadImage()"
                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                        Save
                    </button>
                    @if (photo && photoUrl) {
                        <button
                        (click)="deleteImage(photo.id)"
                        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            delete
                    </button>
                    }
                    
                </div>
            </div>
        </div>
    </div>
</div>

</div>